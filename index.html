<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <title>btcmerch by sde1000</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>btcmerch</h1>
        <h2>Bitcoin merchant service</h2>

        <section id="downloads">
          <a href="https://github.com/sde1000/btcmerch/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/sde1000/btcmerch/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/sde1000/btcmerch" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <p>This service is used to accept payment in Bitcoin in pubs run by <a href="https://www.individualpubs.co.uk/">Individual Pubs Ltd</a>.</p>

<p>The server-side code isn't published yet.  The client code is <a href="https://github.com/sde1000/quicktill">part of the "quicktill" package</a>.</p>

<h1>
<a name="customer-experience" class="anchor" href="#customer-experience"><span class="octicon octicon-link"></span></a>Customer experience</h1>

<ol>
<li>Order your drinks and food.</li>
<li>Ask to pay by Bitcoin.</li>
<li>The till will display a QR code for you to scan with your mobile Bitcoin wallet.  If you can't scan from the screen, it can be printed on paper.  Note that this code is for this transaction only; don't save the address to your address book, it won't be valid for any other transactions.</li>
<li>Once you've sent the Bitcoins, the till should say that they have been received.  If there's a problem (users of the blockchain.info wallet often find that there's a 20 or 30 minute delay at this point) we can set the transaction aside and check for payment later.</li>
</ol><p>At the moment we offer payment by Bitcoin using the exchange rate supplied by the bitpay.com rate API.  We fetch this twice per day; we don't call them for every transaction.</p>

<h2>
<a name="caveats" class="anchor" href="#caveats"><span class="octicon octicon-link"></span></a>Caveats</h2>

<ol>
<li>If you overpay, we don't give change; there's nothing in the protocol to say where we should send it!</li>
<li>We don't offer "cashback" on Bitcoin transactions; you can't use us to convert Bitcoin to Sterling.</li>
<li>If you underpay, the transaction won't complete until you send the rest of the money.  If we've received part-payment, we can offer another QR code requesting the remaining amount.</li>
</ol><h1>
<a name="how-it-works" class="anchor" href="#how-it-works"><span class="octicon octicon-link"></span></a>How it works</h1>

<p>Bitcoin processing is provided to Individual Pubs Ltd by Stephen Early acting as a sole trader.  (Full disclosure: Stephen Early is also a director of Individual Pubs Ltd.)  The pub company's accounts
are entirely in Sterling; Stephen Early might make a profit or a loss on providing this service.</p>

<p>Steve runs the reference Bitcoin daemon on a server in a datacenter, which is connected to all our pubs over a VPN.  The server also runs a custom web service written in Python using Django that accepts requests from the tills and interfaces with the Bitcoin daemon using the <a href="https://github.com/laanwj/bitcoin-python">bitcoin-python library</a>.</p>

<p>When a till needs to request Bitcoins for a transaction, it sends a request to the web service.  The web service looks up the current exchange rate and stores it, and fetches a fresh Bitcoin address from the Bitcoin daemon; a bitcoin: URL is returned to the till requesting payment.  The till converts the URL to a QR code and displays it.  The till then makes the same request whenever it needs to check whether the transaction has been paid; the web service either returns a bitcoin: URL requesting the balance of the payment, or a "success" result.</p>

<p>When the till is being closed at the end of the day, it sends a request to the web service listing the transactions it believes have been paid by Bitcoin.  The web service responds with the Sterling total that is due to the pub for those transactions; hopefully this matches the amount the till is expecting!  A reconciliation record is created in the web service, and all the transactions named by the till are marked as Reconciled.  At this point, Steve pays the pub company the total amount in Sterling for those transactions.</p>

<p>Once a sufficient number of Bitcoins have been accumulated in reconciled transactions, Steve uses an external service to convert them to Sterling.  If the amount received in Sterling is greater than the amount paid to the pub company, Steve records a profit.  If it is lower, Steve records a loss.  At the end of the tax year, Steve will pay tax in Sterling based on the total profit or loss in the year.</p>

<h1>
<a name="frequently-asked-questions" class="anchor" href="#frequently-asked-questions"><span class="octicon octicon-link"></span></a>Frequently asked questions</h1>

<p>(Journalists start here!)</p>

<h2>
<a name="why-did-you-decide-to-accept-bitcoin" class="anchor" href="#why-did-you-decide-to-accept-bitcoin"><span class="octicon octicon-link"></span></a>Why did you decide to accept Bitcoin?</h2>

<p>I became aware of Bitcoin sometime in 2010, and followed news about it irregularly.  I bought myself some Bitcoins using the now-defunct "britcoin" exchange in June 2011, but then didn't do anything with them for ages.  Bitcoin being in the news in the first couple of months of 2013 reminded me.</p>

<p>Let's take a step back for a moment and talk about accepting cards.</p>

<p>We currently have cordless card terminals: we have one or two behind the bar, and we take them over to wherever the customer is standing to deal with the payment.  The workflow for a card transaction looks something like this:</p>

<ol>
<li>Enter the customer's drinks into the till; the till comes up with a total.</li>
<li>Copy the total into the card machine manually (eg. if the drinks came to £12.35 then at this point we would press "1 2 3 5 Enter" on the card machine).</li>
<li>Take the card machine to the customer.  Their card goes in the front of the machine (it's all chip-and-PIN here, we generally don't accept magstripe-only cards).  If it's a debit card, the machine prompts us to ask if the customer would like cashback, and if they want it, how much.</li>
<li>The customer enters their PIN, the card machine contacts the merchant service provider, and if the transaction goes through it prints out two receipts - one for us, and one for the customer.</li>
<li>We take our copy of the receipt back to the till.  We enter any cashback amount into the till, and the four-digit receipt number.  The receipt is filed, and if there's any cashback then we take the appropriate amount out of the till and give it to the customer.</li>
</ol><p>At the end of the day, each card machine produces a totals receipt.  We add together the totals on all the receipt and hope it matches up with what the till thinks we took!  Quite often, it doesn't — someone
will have made a mistake entering transaction or cashback amounts at some point in the day.</p>

<p>What I would <em>like</em> to happen when accepting cards is for the till to transfer the transaction total over the network to the card machine, and for the card machine to send a response at the end of the transaction with the cashback amount and receipt number.  This would remove the need for values to be copied across manually.  It sounds like a small change - but I can't find anybody who will sell me equipment that does this! It clearly exists because I see it in supermarkets, large chain pubs, and so on — I just suspect that my company is seen as too small to be worth selling to.</p>

<p>Let's compare this to the workflow for accepting Bitcoin:</p>

<ol>
<li>Enter the customer's drinks into the till; the till comes up with a total.</li>
<li>Press "pay by Bitcoin".  The till displays a QR code.</li>
<li>The customer scans the QR code with their wallet app and presses "Send".</li>
<li>The till display changes to say the transaction is complete.</li>
</ol><p>At the end of the day, the Bitcoin total is generated automatically. It's all much easier for our staff, and with much less scope for human error.</p>

<p>So, why did I decide to accept Bitcoin?  Because it let me build the kind of system that I <em>wanted</em> to build for accepting cards, but couldn't.</p>

<h2>
<a name="how-long-have-you-been-accepting-bitcoins" class="anchor" href="#how-long-have-you-been-accepting-bitcoins"><span class="octicon octicon-link"></span></a>How long have you been accepting Bitcoins?</h2>

<p>I started testing with my own Bitcoins on 23rd May 2013 in Norwich.  The first Bitcoin transaction that involved a third-party took place on 1st June 2013 at the Pembury Tavern in Hackney; this is <a href="http://www.reddit.com/r/Bitcoin/comments/1fh10f/holy_smokes_my_first_ever_bitcoin_beer_it_works/">the one mentioned on Reddit here</a>.</p>

<h2>
<a name="how-many-customers-are-taking-advantage-of-your-acceptance-of-bitcoins" class="anchor" href="#how-many-customers-are-taking-advantage-of-your-acceptance-of-bitcoins"><span class="octicon octicon-link"></span></a>How many customers are taking advantage of your acceptance of Bitcoins?</h2>

<p>Short answer?  Not many, but more than I expected — in the first two weeks we took about £750-worth of Bitcoins.  It's settled down to about £1000-worth per month, so it's only a small part of the business.  It's obviously still enthusiasts who have heard about it on the net!</p>

<h2>
<a name="have-you-heard-of-any-other-pubs-accepting-bitcoin" class="anchor" href="#have-you-heard-of-any-other-pubs-accepting-bitcoin"><span class="octicon octicon-link"></span></a>Have you heard of any other pubs accepting Bitcoin?</h2>

<p>There are a few.  Have a look at <a href="http://coinmap.org/">coinmap</a>.</p>

<h2>
<a name="has-your-accepting-bitcoin-been-mentioned-in-the-media" class="anchor" href="#has-your-accepting-bitcoin-been-mentioned-in-the-media"><span class="octicon octicon-link"></span></a>Has your accepting Bitcoin been mentioned in the media?</h2>

<p>Just a bit!  There should be a long list of articles here — I have to get around to importing it from the old version of this web page.</p>

<h2>
<a name="can-i-ask-you-some-questions-about-how-you-accept-bitcoin--im-writing-an-article" class="anchor" href="#can-i-ask-you-some-questions-about-how-you-accept-bitcoin--im-writing-an-article"><span class="octicon octicon-link"></span></a>Can I ask you some questions about how you accept Bitcoin?  I'm writing an article...</h2>

<p>Sure, if they have not already been answered here.  If you ask particularly good questions I'll add them to this page!</p>

<h2>
<a name="have-you-heard-about-litecoin-ripples-dogecoin-" class="anchor" href="#have-you-heard-about-litecoin-ripples-dogecoin-"><span class="octicon octicon-link"></span></a>Have you heard about Litecoin, Ripples, Dogecoin, ...?</h2>

<p>Yes.  They are not currently interesting to me.</p>

<h2>
<a name="are-you-involved-in-any-other-bitcoin-projects" class="anchor" href="#are-you-involved-in-any-other-bitcoin-projects"><span class="octicon octicon-link"></span></a>Are you involved in any other Bitcoin projects?</h2>

<p>No, I'm not.</p>
      </section>
    </div>

    
  </body>
</html>